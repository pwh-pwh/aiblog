---
import Layout from '../../layouts/Layout.astro';
import Navbar from '../../components/Navbar';
import { getCollection } from 'astro:content';
import { ArrowLeft } from 'lucide-react';
import Footer from '../../components/Footer.astro';

export async function getStaticPaths() {
	const posts = await getCollection('blog');
	return posts.map((post) => ({
		params: { slug: post.slug },
		props: post,
	}));
}

const post = Astro.props;
const { Content } = await post.render();
---

<Layout title={post.data.title} description={post.data.description}>
	<Navbar client:load />
	
	<main class="pt-32 pb-24 px-4">
		<article class="max-w-3xl mx-auto">
			<div class="mb-8">
				<a href="/" class="inline-flex items-center text-sm text-muted-foreground hover:text-primary transition-colors mb-8 group">
					<ArrowLeft className="w-4 h-4 mr-2 transition-transform group-hover:-translate-x-1" />
					Back to Home
				</a>
				
				<div class="flex items-center gap-4 text-sm text-muted-foreground mb-6">
					<span class="px-3 py-1 rounded-full bg-white/5 border border-white/10 text-primary font-medium">
						{post.data.category}
					</span>
					<time datetime={post.data.pubDate.toISOString()}>
						{post.data.pubDate.toLocaleDateString('en-us', {
							year: 'numeric',
							month: 'long',
							day: 'numeric',
						})}
					</time>
				</div>

				<h1 class="font-heading text-4xl md:text-5xl font-bold mb-6 leading-tight">
					{post.data.title}
				</h1>
				
				<p class="text-xl text-muted-foreground leading-relaxed">
					{post.data.description}
				</p>
			</div>

			<div class="w-full h-[400px] rounded-2xl mb-12 overflow-hidden relative">
				<div 
					class="absolute inset-0 w-full h-full"
					style={{ background: post.data.heroImage }}
				/>
			</div>

			<div class="prose prose-invert prose-lg max-w-none prose-headings:font-heading prose-headings:font-bold prose-a:text-primary prose-img:rounded-xl">
				<Content />
			</div>
		</article>
	</main>

	<Footer />
</Layout>
